<md-dialog class="redimensionar" fullscreen="true" ng-init="confirmacionAbierta=false;confirmacionTest=false;confirmacionTestAbierto=false;
									  deshabilitadoAbierta=false;deshabilitadoTest=false;deshabilitadoTestAbierto=false;
															crear=true">
    <form>
        <md-toolbar>
            <div class="md-toolbar-tools">
                <h2>
                    Crear pregunta {{cabeceraCrear}}
                </h2>
                <span flex></span>
				<md-button aria-label="ayuda" ng-click="ayuda()" 
						   class="md-button icon centrarIconoLista explosionIcono iconosHeader">
					<md-icon class="iconoBlanco" md-svg-src="img/ayuda.svg"></md-icon>
					<md-tooltip md-direction="bottom">
						Ayuda
					</md-tooltip>
				</md-button>
                <md-button class="md-icon-button" aria-label="cerrarCrearPregunta" ng-click="cancel()">
                    <md-icon md-svg-src="img/cerrar.svg"></md-icon>
                </md-button>

            </div>
        </md-toolbar>

        <md-dialog-content ng-model="conte" ng-show="crear">
            <md-tabs class="md-accent" md-dynamic-height md-border-bottom>
                <md-tab label="pregunta abierta">
                    <md-content>
                        <div class="contenidoTablaCrear">
                            <md-slider flex="" md-discrete="" ng-model="nivelAbierta" aria-label="nivel abierta" 
                                       step="1" min="1" max="10">
                            </md-slider>

                            <md-chips ng-model="temasAbierta" md-autocomplete-snap="" 
                                      md-transform-chip="transformChip($chip, 'ABIERTA')" md-require-match="false"
									  md-on-remove="deleteChip()">
                                <md-autocomplete md-selected-item="selectedItem" md-search-text="searchText"
                                                 md-items="item in queryBuscarTema(searchText)"
                                                 md-item-text="item.valor"
                                                 placeholder="Aptitudes">

                                    <span md-highlight-text="searchText">
                                        {{item.tag}}
                                    </span>
                                </md-autocomplete>
                                <md-chip-template>
                                    <span> {{$chip.tag}} </span>
                                </md-chip-template>
                            </md-chips>
							
							<div class="alert alert-info" ng-show="!confirmacionAbierta && entendidoAbierta">
  								Las aptitudes seleccionadas deberán tener alguna <span class="letraNegrita">relación entre si</span>
								<md-button class="md-icon-button" aria-label="cerrarCrearPregunta" 
										   ng-click="entendidoAbierta = false">
									<md-icon md-svg-src="img/cerrar.svg"></md-icon>
								</md-button>
							</div>
							<div class="alert alert-warning" ng-show="confirmacionAbierta">
  								¿Está seguro de que quiere crear esta aptitud?
									<md-button aria-label="eliminar" ng-click="crearTema()" 
											   class="md-button icon explosionIcono okCrearTema">
										<md-icon md-svg-src="img/ok.svg"></md-icon>
									</md-button>
									<md-button aria-label="eliminar" ng-click="cerrarConfirm()" 
											   class="md-button icon explosionIcono cancelCrearTema">
										<md-icon md-svg-src="img/cerrar.svg"></md-icon>
									</md-button>
							</div>

                            <md-input-container class="md-block">
                                <label>Enunciado de la pregunta *</label>
                                <textarea required ng-model="tituloAbierta"></textarea>
								<div ng-messages="tituloAbierta.$error">
									<div ng-message="required">Este campo es obligatorio</div>								
								</div>
                            </md-input-container>

                            <md-input-container class="md-block">
                                <label>Directivas de la pregunta</label>
                                <textarea ng-model="directivasAbierta"></textarea>
                            </md-input-container>

                            <md-button class="md-raised" ng-click="crearPAbierta()"
									   ng-disabled="deshabilitadoAbierta">Guardar</md-button>
                        </div>                    
                    </md-content>
                </md-tab>


                <md-tab label="pregunta tipo test">
                    <md-content>
                        <div class="contenidoTablaCrear">
                            <md-slider flex="" md-discrete="" ng-model="nivelTest" aria-label="nivel test" 
                                       step="1" min="1" max="10">
                            </md-slider>

                            <md-chips ng-model="temasTest" md-autocomplete-snap="" 
                                      md-transform-chip="transformChip($chip, 'TEST')" md-require-match="false">
                                <md-autocomplete  md-selected-item="selectedItem" md-search-text="searchText"
                                                 md-items="item in queryBuscarTema(searchText)"
                                                 md-item-text="item.valor"
                                                 placeholder="Aptitudes">

                                    <span md-highlight-text="searchText">
                                        {{item.tag}}
                                    </span>
                                </md-autocomplete>
                                <md-chip-template>
                                    <span> {{$chip.tag}} </span>
                                </md-chip-template>
                            </md-chips>
							<div class="alert alert-info" ng-show="!confirmacionTest && entendidoTest">
  								Las aptitudes seleccionadas deberán tener alguna <span class="letraNegrita">relación entre si</span>
								<md-button class="md-icon-button" aria-label="cerrarCrearPregunta" ng-click="entendidoTest = false">
									<md-icon md-svg-src="img/cerrar.svg"></md-icon>
								</md-button>
								<p>Algo de tema general</p>
							</div>
							
							<div class="alert alert-warning" ng-show="confirmacionTest">
  								¿Está seguro de que quiere crear esta aptitud?								
									<md-button aria-label="eliminar" ng-click="crearTema()" 
											   class="md-button icon explosionIcono okCrearTema">
										<md-icon md-svg-src="img/ok.svg"></md-icon>
									</md-button>
									<md-button aria-label="eliminar" ng-click="cerrarConfirm()" 
											   class="md-button icon explosionIcono cancelCrearTema">
										<md-icon md-svg-src="img/cerrar.svg"></md-icon>
									</md-button>
							</div>

                            <md-input-container class="md-block">
                                <label>Enunciado de la pregunta *</label>
                                <textarea required ng-model="tituloTest"></textarea>
								<div ng-messages="tituloTest.$error">
									<div ng-message="required">Este campo es obligatorio</div>								
								</div>
                            </md-input-container>
                            <md-radio-group ng-model="radioTest">
                                <div ng-repeat="respuestas in test">
                                    <span>
                                        <md-radio-button value="{{respuestas}}" aria-label="respuestas test" >
                                    </md-radio-button>

                                    <md-input-container class="md-block respuesta">
                                        <label>Respuesta {{respuestas}} *</label>
                                        <textarea required ng-model="respuestasTest[$index]"></textarea>
										<div ng-messages="respuestasTest[$index].$error">
											<div ng-message="required">Debe introucir una respuesta</div>					
										</div>
                                    </md-input-container>
                                    </span>
                                </div>
                            </md-radio-group>

                            <md-button class="md-fab md-mini" ng-click="aniadirRespuestaTest()" aria-label="crearPregunta">
                                <md-icon md-svg-src="img/mas.svg"></md-icon>
                            </md-button>

                            <md-button class="md-raised" ng-click="crearPTest()"
									   ng-disabled="deshabilitadoTest">Guardar</md-button>

                        </div>      
                    </md-content>
                </md-tab>                    

                <md-tab label="pregunta de selección múltiple">
                    <md-content>
                        <div class="contenidoTablaCrear">
                            <md-slider flex="" md-discrete="" ng-model="nivelTestAbierto" aria-label="nivel test abierto" 
                                   step="1" min="1" max="10">
                            </md-slider>

                            <md-chips ng-model="temasTestAbierto" md-autocomplete-snap="" 
                                      md-transform-chip="transformChip($chip, 'TEST_ABIERTO')" md-require-match="false">
                                <md-autocomplete md-selected-item="selectedItem" md-search-text="searchText"
                                                 md-items="item in queryBuscarTema(searchText)"
                                                 md-item-text="item.valor"
                                                 placeholder="Aptitudes">

                                    <span md-highlight-text="searchText">
                                        {{item.tag}}
                                    </span>
                                </md-autocomplete>
                                <md-chip-template>
                                    <span> {{$chip.tag}} </span>
                                </md-chip-template>
                            </md-chips>
							<div class="alert alert-info" ng-show="!confirmacionTestAbierto && entendidoTestAbierto">
  								Las aptitudes seleccionadas deberán tener alguna <span class="letraNegrita">relación entre si</span>
								<md-button class="md-icon-button" aria-label="cerrarCrearPregunta" 
										   ng-click="entendidoTestAbierto = false">
									<md-icon md-svg-src="img/cerrar.svg"></md-icon>
								</md-button>
								<p>Algo de tema general</p>
							</div>
							
							<div class="alert alert-warning" ng-show="confirmacionTestAbierto">
  								¿Está seguro de que quiere crear esta aptitud?
								
									<md-button aria-label="eliminar" ng-click="crearTema()" 
											   class="md-button icon explosionIcono okCrearTema">
										<md-icon md-svg-src="img/ok.svg"></md-icon>
									</md-button>
									<md-button aria-label="eliminar" ng-click="cerrarConfirm()" 
											   class="md-button icon explosionIcono cancelCrearTema">
										<md-icon md-svg-src="img/cerrar.svg"></md-icon>
									</md-button>
							</div>

                            <md-input-container class="md-block">
                                <label>Enunciado de la pregunta *</label>
                                <textarea required ng-model="tituloTestAbierto"></textarea>
								<div ng-messages="tituloTestAbierto.$error">
									<div ng-message="required">Este campo es obligatorio</div>
								</div>
                            </md-input-container>

                            <div ng-repeat="respuestasAbierto in testAbierto">
                                <md-checkbox class="respuesta" ng-model="checkTestAbierto[$index]" 
                                             aria-label="respuestas test abierto">
                                </md-checkbox>
                                <md-input-container class="md-block respuesta">
                                    <label>Respuesta {{respuestasAbierto}} *</label>
                                    <textarea ng-model="respuestasTestAbierto[$index]"></textarea>
									<div required ng-messages="respuestasTestAbierto[$index].$error">
										<div ng-message="required">Debe introucir una respuesta</div>			
									</div>
                                </md-input-container>
                            </div>

                            <md-button class="md-fab md-mini" ng-click="aniadirRespuestaTestAbierto()" 
                                       aria-label="crearPregunta abierta">
                                <md-icon md-svg-src="img/mas.svg"></md-icon>
                            </md-button>

                            <md-button class="md-raised" ng-click="crearPTestAbierta()" 
									   ng-disabled="deshabilitadoTestAbierto">Guardar</md-button>

                        </div>
                    </md-content>
                </md-tab>
            </md-tabs>
        </md-dialog-content>
		<md-dialog-content ng-model="conte" ng-show="!crear" class="ayudaTec">
            <md-tabs class="md-accent" md-dynamic-height md-border-bottom>
				<md-tab label="general">
                    <md-content>
						<div class="alert alert-info alertAyuda">
							<p>Hay 3 pestañas: <b>"PREGUNTA ABIERTA"</b>, <b>"PREGUNTA TIPO TEST"</b> y <b>"PREGUNTA DE SELECCIÓN MÚLTIPLE"</b>.</p>
							<p>En la pestaña <b>"PREGUNTA ABIERTA"</b> se rellenarán los datos necesarios para crear una pregunta de tipo abierta.</p>
							<p>En la pestaña <b>"PREGUNTA TIPO TEST"</b> se rellenarán los datos necesarios para crear una pregunta de tipo test.</p>
							<p>En la pestaña <b>"PREGUNTA DE SELECCIÓN MÚLTIPLE"</b> se rellenarán los datos necesarios para crear una pregunta de tipo selección múltiple.</p>
						</div>
						<div class="alert alert-info alertAyuda">
							<p>La siguiente barra será para que pueda seleccionar el nivel de la pregunta. Por defecto es 5.</p>
							<md-slider flex="" md-discrete="" ng-model="nivelAbierta" aria-label="nivel abierta"
									   step="1" min="1" max="10">
							</md-slider>
						</div>
						<div class="alert alert-info alertAyuda">
							<p>En el campo <b>"Aptitudes"</b> podrá seleccionar una o varias que tenga la pregunta.</p>
						</div>
						<div class="alert alert-info alertAyuda">
							<p>En el campo <b>"Enunciado de la pregunta"</b> deberá introducir el enunciado. Este campo es obligatorio</p>
						</div>
						<div class="alert alert-info alertAyuda">
							<p>El siguiente botón es para guardar la entrevista con los datos introducidos:</p>
							<md-button class="md-raised">Guardar</md-button>
						</div>
                    </md-content>
                </md-tab>
                <md-tab label="pregunta abierta">
                    <md-content>
						<div class="alert alert-info alertAyuda">
							<p>En el campo <b>"Directivas de la pregunta"</b> podrá introducir las directrices que usted considere necesarias. Este campo no es obligatorio.</p>
						</div>
                    </md-content>
                </md-tab>
                <md-tab label="pregunta tipo test">
                    <md-content>
						<div class="alert alert-info alertAyuda">
							<p>En esta sección deberá rellenar los campos de las respuestas y marcar una de las respuestas como correcta. Todas las respuestas deben estar rellenas.</p>
						</div>
						<div class="alert alert-info alertAyuda btnMas">
							<p>El siguiente botón sirve para añadir otro campo de respuesta.</p>
							<md-button class="md-fab md-mini btnAyuda" 
                                       aria-label="crearPregunta abierta">
                                <md-icon md-svg-src="img/mas.svg"></md-icon>
                            </md-button>
						</div>
                    </md-content>
                </md-tab>                    

                <md-tab label="pregunta de selección múltiple">
                    <md-content>
                        <div class="alert alert-info alertAyuda">
							<p>En esta sección deberá rellenar los campos de las respuestas. Puede marcar como respuesta correcta una, varias o ninguna. Todas las respuestas deben estar rellenas.</p>
						</div>
						<div class="alert alert-info alertAyuda btnMas">
							<p>El siguiente botón sirve para añadir otro campo de respuesta.</p>
							<md-button class="md-fab md-mini btnAyuda" 
                                       aria-label="crearPregunta abierta">
                                <md-icon md-svg-src="img/mas.svg"></md-icon>
                            </md-button>
						</div>
                    </md-content>
                </md-tab>
            </md-tabs>
        </md-dialog-content>
    </form>
</md-dialog>